# 実装計画

## フェーズ 1: MVP 実装

- [x] 1. プロジェクト初期設定とコア計算ロジックの実装

  - Next.js 14 プロジェクトを TypeScript と Tailwind CSS で初期化
  - 地球回転計算の核となる EarthRotationCalculator クラスを実装
  - 恒星日（86,164 秒）を基準とした高精度計算アルゴリズムを作成
  - _要件: 1.1, 1.2, 1.3_

- [x] 2. 基本 UI コンポーネントの作成

  - メインレイアウトと Header、Footer コンポーネントを実装
  - 現在時刻と回転数を表示する MainCounter コンポーネントを作成
  - レスポンシブデザインのための Tailwind CSS クラスを適用
  - _要件: 1.4, 4.1, 4.2, 4.3, 4.4_

- [x] 3. リアルタイムカウンター機能の実装

  - useEffect と setInterval を使用した 1 秒間隔の自動更新システムを実装
  - 現在時刻と回転数の同期更新ロジックを作成
  - パフォーマンス最適化のためのメモ化処理を追加
  - _要件: 2.1, 2.2, 2.3, 2.4_

- [x] 4. 煽りフレーズ生成とコピー機能の実装

  - TauntGenerator クラスで煽りフレーズの自動生成機能を実装
  - クリップボード API を使用したコピー機能を作成
  - コピー成功時の確認メッセージ表示機能を追加
  - エラーハンドリングとフォールバック機能を実装
  - _要件: 3.1, 3.2, 3.3, 3.4_

- [x] 5. 日時フォーマットと表示の最適化

  - 日時の多言語対応フォーマット関数を実装
  - 回転数の桁区切り表示機能を作成
  - 小数点第 6 位までの精度表示を実装
  - 計算基準の明示機能を追加
  - _要件: 1.3, 1.4_

- [x] 6. エラーハンドリングとユーザビリティの向上

  - 計算エラー、クリップボードエラー、タイマーエラーの包括的な処理を実装
  - ユーザーフレンドリーなエラーメッセージ表示システムを作成
  - フォールバック機能（手動更新ボタン、手動コピー促進）を実装
  - ローディング状態とエラー状態の UI 表示を追加
  - _要件: 全般的なユーザビリティ向上_

- [x] 7. 単体テストの実装

  - EarthRotationCalculator クラスの計算精度テストを作成
  - TauntGenerator クラスのフレーズ生成テストを実装
  - 日時変換とフォーマット関数のテストを作成
  - Jest + React Testing Library を使用したコンポーネントテストを実装
  - **テストカバレッジ89.74%達成（ビジネスロジック100%）**
  - **全107テストが成功、テストエラー修正完了**
  - _要件: テスト戦略の実現_

- [x] 8. 統合テストと E2E テストの実装

  - リアルタイムカウンターの連続動作テストを作成
  - ユーザーインタラクション（ボタンクリック、コピー）のテストを実装
  - レスポンシブデザインの各デバイスサイズでの表示テストを作成
  - Playwright を使用した E2E テストシナリオを実装
  - **統合テスト5個、E2Eテスト8個を実装完了**
  - _要件: 4.1, 4.2, 4.3, 4.4, 全体的な品質保証_

- [x] 9. パフォーマンス最適化とビルド設定

  - React.memo を使用したコンポーネントの最適化を実装
  - Next.js の自動コード分割設定を最適化
  - 静的サイト生成のための next.config.js を設定
  - GitHub Pages 用のビルドとエクスポート設定を作成
  - **バンドルサイズ3.52kBに最適化、React.memoで全コンポーネント最適化**
  - _要件: パフォーマンスとデプロイメント_

- [x] 10. MVP 最終統合とデプロイメント準備
  - 全 MVP コンポーネントの統合とアプリケーション全体の動作確認
  - クロスブラウザテスト（Chrome, Firefox, Safari, Edge）を実行
  - GitHub Actions 用の CI/CD パイプライン設定を作成
  - MVP 版の README.md とドキュメントの更新
  - **CI/CDパイプライン構築、README更新、全テスト通過確認**
  - _要件: MVP 全体的な完成度とデプロイメント準備_

## フェーズ 2: 拡張機能実装

- [ ] 11. 任意日時入力機能の実装

  - DateTimeInput コンポーネントを作成
  - 任意の日時から地球回転数を計算する機能を実装
  - 入力バリデーションとエラーハンドリングを追加
  - UTC 基準とローカル日基準の選択機能を実装
  - _要件: 6.1, 6.2, 6.3, 6.4_

- [ ] 12. 地球回転数から日時への逆変換機能

  - RotationInput コンポーネントを作成
  - 回転数から対応する日時を計算する逆変換機能を実装
  - 未来日時の明示機能を追加
  - 無効な回転数のエラーハンドリングを実装
  - _要件: 7.1, 7.2, 7.3, 7.4_

- [ ] 13. ダークモード・ライトモード切り替え機能

  - ThemeToggle コンポーネントを作成
  - ThemeManager クラスでテーマ状態管理を実装
  - ローカルストレージでのテーマ設定保存機能を追加
  - システム設定に基づく初期テーマ設定を実装
  - _要件: 8.1, 8.2, 8.3_

- [ ] 14. 教育モードと豆知識機能

  - InfoTooltip コンポーネントを作成
  - 恒星日と太陽日の違いの説明機能を実装
  - 閏年・うるう秒の豆知識表示機能を追加
  - 計算基準の詳細説明機能を実装
  - _要件: 9.1, 9.2, 9.3, 9.4_

- [ ] 15. 他惑星比較機能

  - PlanetComparison コンポーネントを作成
  - 火星・木星の自転回数計算機能を実装
  - 惑星間の比較グラフ表示機能を追加
  - 惑星選択ドロップダウンとデータ表示を実装
  - _要件: 10.1, 10.2, 10.3, 10.4_

- [ ] 16. SNS シェア機能

  - SharePanel コンポーネントを作成
  - 回転数と煽りフレーズの画像化機能を実装
  - X（Twitter）投稿リンク生成機能を追加
  - Instagram 用画像ダウンロード機能を実装
  - _要件: 11.1, 11.2, 11.3, 11.4_

- [ ] 17. ミニゲーム機能

  - GameSection コンポーネントを作成
  - ピタリ賞ゲーム（整数回転当て）を実装
  - デイリーチャレンジクイズ機能を追加
  - スコア表示と成功・失敗判定システムを実装
  - _要件: 12.1, 12.2, 12.3, 12.4_

- [ ] 18. 拡張機能の統合テスト
  - 全拡張機能の統合テストを作成
  - 新機能の E2E テストシナリオを実装
  - パフォーマンステストと最適化を実行
  - 拡張機能のドキュメント更新
  - _要件: 拡張機能全体の品質保証_
