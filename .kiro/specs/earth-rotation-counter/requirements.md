# 要件書

## はじめに

「地球が何回回った時？」は、子どもたちの煽りフレーズ「いつ？何年何月何日何曜日？何時何分何秒？地球が何回回ったとき？」に即座に答えることができるWebアプリケーションです。このアプリは、任意の日時と地球の累積自転回数を相互変換し、リアルタイムカウンターや煽りフレーズ自動生成機能を提供することで、楽しみながら科学への興味を高めることを目的としています。

## MVP要件

以下の要件1-4はMVP（Minimum Viable Product）として最初にリリースする機能です。

### 要件1

**ユーザーストーリー:** ユーザーとして、現在時刻での地球の累積自転回数を知りたい

#### 受け入れ基準

1. WHEN ページが読み込まれる THEN システムは現在時刻を基に地球の累積自転回数を小数点第6位まで計算して表示する
2. WHEN 計算基準として世界標準時（UTC）基準を使用 THEN システムは西暦0001-01-01 00:00を0回転として計算する
3. WHEN 計算が完了 THEN システムは結果を「1,688,512,943.123 回転」の形式で表示する
4. WHEN 現在の日時情報も表示 THEN システムは「2025年8月1日（金）12時34分56秒」の形式で併記する

### 要件2

**ユーザーストーリー:** ユーザーとして、現在時刻での地球の回転数をリアルタイムで見たい

#### 受け入れ基準

1. WHEN ページが読み込まれる THEN システムは現在時刻に基づく地球の回転数をリアルタイムで表示する
2. WHEN 1秒経過 THEN システムは恒星日（23時間56分4秒）基準で回転数を更新する
3. WHEN リアルタイムカウンターが動作中 THEN システムは1秒あたり約1/86,164回転の増加を表示する
4. WHEN 時刻も同時に更新 THEN システムは現在の日時も1秒ごとに更新して表示する

### 要件3

**ユーザーストーリー:** ユーザーとして、煽りフレーズを自動生成してコピーまたは共有したい

#### 受け入れ基準

1. WHEN ユーザーが「煽りフレーズ生成」ボタンをクリック THEN システムは現在の日時と回転数を含むフレーズを生成する
2. WHEN フレーズが生成される THEN システムは「いつ？何年何月何日何曜日？何時何分何秒？地球が○○回転したとき！」の形式で表示する
3. WHEN ユーザーがコピーボタンをクリック THEN システムはフレーズをクリップボードにコピーする
4. WHEN コピーが完了 THEN システムは「コピーしました」の確認メッセージを表示する

### 要件4

**ユーザーストーリー:** ユーザーとして、モバイルデバイスでも快適にアプリを使用したい

#### 受け入れ基準

1. WHEN ユーザーがスマートフォンでアクセス THEN システムはモバイル向けに最適化されたレイアウトを表示する
2. WHEN ユーザーがタブレットでアクセス THEN システムはタブレット向けに最適化されたレイアウトを表示する
3. WHEN ユーザーがPCでアクセス THEN システムはデスクトップ向けに最適化されたレイアウトを表示する
4. WHEN 画面サイズが変更される THEN システムはレスポンシブにレイアウトを調整する

## 拡張要件

以下の要件5-12は、MVP後に追加する拡張機能です。

### 要件5

**ユーザーストーリー:** ユーザーとして、ダークモードとライトモードを切り替えたい

#### 受け入れ基準

1. WHEN ユーザーがテーマ切り替えボタンをクリック THEN システムはダークモードとライトモードを切り替える
2. WHEN テーマが変更される THEN システムは選択されたテーマを保存して次回アクセス時に適用する
3. WHEN ページが読み込まれる THEN システムはユーザーのシステム設定またはローカル保存されたテーマを適用する

### 要件6

**ユーザーストーリー:** ユーザーとして、任意の日時を入力して地球の回転数を知りたい

#### 受け入れ基準

1. WHEN ユーザーが日時入力フィールドに任意の日時を入力 THEN システムはその瞬間までの地球の累積自転回数を計算して表示する
2. WHEN 計算基準として世界標準時（UTC）基準を選択 THEN システムは西暦0001-01-01 00:00を0回転として計算する
3. WHEN 計算基準としてローカル日基準を選択 THEN システムは当日の00:00を0回転として日内の小数を算出する
4. WHEN 計算が完了 THEN システムは結果を「1,688,512,943.123 回転」の形式で表示する

### 要件7

**ユーザーストーリー:** ユーザーとして、地球の回転数から逆算して日時を知りたい

#### 受け入れ基準

1. WHEN ユーザーが回転数入力フィールドに数値を入力 THEN システムはその回転数に対応する日時を計算して表示する
2. WHEN 計算が完了 THEN システムは結果を「2032年2月29日（土）7時15分30秒 UTC」の形式で表示する
3. WHEN 無効な回転数が入力される THEN システムはエラーメッセージを表示する
4. WHEN 計算結果が未来の日時 THEN システムは「未来の日時」であることを明示する

### 要件8

**ユーザーストーリー:** ユーザーとして、ダークモードとライトモードを切り替えたい

#### 受け入れ基準

1. WHEN ユーザーがテーマ切り替えボタンをクリック THEN システムはダークモードとライトモードを切り替える
2. WHEN テーマが変更される THEN システムは選択されたテーマを保存して次回アクセス時に適用する
3. WHEN ページが読み込まれる THEN システムはユーザーのシステム設定またはローカル保存されたテーマを適用する

### 要件9

**ユーザーストーリー:** ユーザーとして、計算の精度と基準について理解したい

#### 受け入れ基準

1. WHEN ユーザーが情報アイコンにホバーまたはタップ THEN システムは恒星日と太陽日の違いについてツールチップを表示する
2. WHEN 計算結果が表示される THEN システムは使用した計算基準を明示する
3. WHEN ユーザーが「詳細情報」をクリック THEN システムは地球の自転に関する豆知識を表示する
4. WHEN 豆知識が表示される THEN システムは閏年・うるう秒の説明も含める

### 要件10

**ユーザーストーリー:** ユーザーとして、他の惑星の自転・公転数も知りたい

#### 受け入れ基準

1. WHEN ユーザーが惑星選択ドロップダウンから火星を選択 THEN システムは火星の自転回数を同時に表示する
2. WHEN ユーザーが惑星選択ドロップダウンから木星を選択 THEN システムは木星の自転回数を同時に表示する
3. WHEN 複数の惑星が選択される THEN システムは比較グラフを表示する
4. WHEN 比較グラフが表示される THEN システムは「火星1回転 = 地球0.41回転」などの比較情報を併記する

### 要件11

**ユーザーストーリー:** ユーザーとして、煽りフレーズや回転数をSNSで共有したい

#### 受け入れ基準

1. WHEN ユーザーがSNSシェアボタンをクリック THEN システムは現在の回転数と煽りフレーズを画像化する
2. WHEN 画像が生成される THEN システムはX（Twitter）への投稿リンクを提供する
3. WHEN 画像が生成される THEN システムはInstagramへの投稿用画像をダウンロード可能にする
4. WHEN ユーザーがスクリーンショット機能を使用 THEN システムは現在の表示内容を画像として保存する

### 要件12

**ユーザーストーリー:** ユーザーとして、地球の回転に関するミニゲームを楽しみたい

#### 受け入れ基準

1. WHEN ユーザーが「ピタリ賞」ゲームを開始 THEN システムはリアルタイムカウンターが整数回転になる瞬間を当てるゲームを提供する
2. WHEN ユーザーが整数回転の瞬間にクリック THEN システムは成功・失敗を判定してスコアを表示する
3. WHEN ユーザーが「デイリーチャレンジ」を開始 THEN システムは「今日は地球が何回転目？」を当てるクイズを提供する
4. WHEN ユーザーがクイズに正解 THEN システムは正解メッセージと次回チャレンジまでの時間を表示する